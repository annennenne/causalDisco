% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make-tikz.R
\name{make_tikz}
\alias{make_tikz}
\title{Generate TikZ Code from a Caugi Plot}
\usage{
make_tikz(
  caugi_plot_obj,
  tier_node_map = NULL,
  scale = 10,
  full_doc = TRUE,
  bend_edges = FALSE,
  bend_angle = 25
)
}
\arguments{
\item{caugi_plot_obj}{A \code{caugi::caugi_plot} object.}

\item{tier_node_map}{Optional named list mapping tier names to vectors of
node names. If provided, tier rectangles and labels are added to the TikZ
output. Default is \code{NULL}.}

\item{scale}{Numeric scalar. Scaling factor for node coordinates. Default is \code{10}.}

\item{full_doc}{Logical. If \code{TRUE} (default), generates a full standalone
LaTeX document. If \code{FALSE}, returns only the \code{tikzpicture} environment.}

\item{bend_edges}{Logical. If \code{TRUE}, edges are drawn with bent edges. Default is \code{FALSE}.
Edges connecting the same pair of nodes in both directions (\code{A \%-->\% B} and \code{B \%-->\% A})
are automatically bent left and right to avoid overlap. Bend direction is automatically chosen
to reduce overlap.}

\item{bend_angle}{Numeric scalar. Angle in degrees for bending arrows when
\code{bend_edges = TRUE}. Default is \code{25}.}
}
\value{
A character string containing LaTeX TikZ code. Depending on
\code{full_doc}, this is either:
\itemize{
\item a complete LaTeX document (\code{full_doc = TRUE}), or
\item only the \code{tikzpicture} environment (\code{full_doc = FALSE}).
}
}
\description{
Generates LaTeX TikZ code from a \code{caugi::caugi_plot} object, preserving
node positions, labels, and visual styles. Edges are rendered with arrows,
line widths, and colors. The output is readable LaTeX code that can be
directly compiled or modified.
}
\details{
The function traverses the plot object's grob structure to extract nodes and
edges. Supported features include:
\itemize{
\item \strong{Nodes}
\itemize{
\item Fill color and draw color (supports both named colors and custom RGB values)
\item Font size
\item Coordinates are scaled by the \code{scale} parameter
}
\item \strong{Edges}
\itemize{
\item Line color and width
\item Arrow scale
\item Optional bending to reduce overlapping arrows
}
}

The generated TikZ code uses global style settings, and edges are connected
to nodes by name (as opposed to hard-coded coordinates), making it easy to
modify the output further if needed.
}
\examples{

cg <- caugi::caugi(A \%-->\% B + C)
plot_obj <- caugi::plot(cg, node_style = list(fill = "red"))

# Full standalone document
tikz_code <- make_tikz(plot_obj, scale = 10, full_doc = TRUE)
cat(tikz_code)

# Only the tikzpicture environment
tikz_snippet <- make_tikz(plot_obj, scale = 10, full_doc = FALSE)
cat(tikz_snippet)

# With bent edges
tikz_bent <- make_tikz(plot_obj, scale = 10, full_doc = FALSE, bend_edges = TRUE)
cat(tikz_bent)

# With a color not supported by default TikZ colors
plot_darkblue <- caugi::plot(cg, node_style = list(fill = "darkblue"))
tikz_darkblue <- make_tikz(plot_darkblue, scale = 10)

# Will use RGB specification for darkblue
cat(tikz_darkblue)

# With tiered nodes
cg_tiered <- caugi::caugi(
  X1 \%-->\% M1 + M2,
  X2 \%-->\% M1 + M2,
  M1 \%-->\% Y,
  M2 \%-->\% Y
)
tiers <- list(
  exposures = c("X1", "X2"),
  mediators = c("M1", "M2"),
  outcome = "Y"
)
plot_tiered <- caugi::plot(cg_tiered, tiers = tiers)
tikz_tiered <- make_tikz(
  plot_tiered,
  tier_node_map = tiers
)
cat(tikz_tiered)

}
